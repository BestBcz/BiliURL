## BiliVideoParser

[![Github](https://img.shields.io/badge/-Github-000?style=flat&logo=Github&logoColor=white)](https://github.com/BestBcz)
[![MiraiForum](https://img.shields.io/badge/Forum-Mirai?style=flat-square&label=Mirai
)](https://mirai.mamoe.net/topic/2795/biliurl%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%A7%A3%E6%9E%90qq%E5%88%86%E4%BA%AB%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%A7%86%E9%A2%91%E5%9C%B0%E5%9D%80%E7%9A%84%E5%B0%8F%E6%8F%92%E4%BB%B6)

-------------------------
#### ğŸŒ± è§£æQQä¸­åˆ†äº«çš„å“”å“©å“”å“©å°ç¨‹åºè§†é¢‘å¹¶ä¸‹è½½å‘é€çš„miraiæ’ä»¶

---------------------------
### ğŸ› ï¸å®‰è£…&ä¾èµ–å‰ç½®
1. ä»Releaseä¸­ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
2. å°†Jaræ–‡ä»¶æ”¾å…¥ _%miraiæ–‡ä»¶æ ¹ç›®å½•%/Plugins/_ ä¸­
3. é‡æ–°å¯åŠ¨ä½ çš„mirai-console
4. Enjoy~

#### ğŸ› ï¸ä¾èµ–å‰ç½®ï¼ˆè¯·å®‰è£…åˆ°ä½ æ­å»ºæœºå™¨äººçš„æœåŠ¡å™¨ä¸Šï¼‰
-  [FFmpeg](https://ffmpeg.org/download.html)
- [yt-dlp](https://github.com/yt-dlp/yt-dlp/releases)
- [Mirai-console 2.16ç‰ˆæœ¬æˆ–ä»¥ä¸Š](https://github.com/mamoe/mirai/releases)
> [!IMPORTANT]
> _ä»¥ä¸Šâ†‘ä¸ºä¸‹è½½è§†é¢‘åŠŸèƒ½å¿…éœ€ä¾èµ–_

 - [å¯é€‰Chat-Command](https://github.com/project-mirai/chat-command)

----------------------------------------

### ğŸ§å·²æ‹¥æœ‰çš„åŠŸèƒ½

- [x] è§†é¢‘è§£æä¸‹è½½
- [x] å°é¢å›¾ä¸‹è½½å¹¶å•ç‹¬å‘é€
- [x] è§†é¢‘é“¾æ¥è§£æ
- [x] è§†é¢‘è¯¦ç»†ä¿¡æ¯è§£æ
- [x] è‡ªåŠ¨åˆ é™¤ä¸‹è½½è§†é¢‘
- [x] Configæ–‡ä»¶
- [x] é•¿é“¾æ¥bilibili.com/video/BVxxx å’Œ çŸ­é“¾æ¥b23.tv/xxxx çš„é€‰æ‹©
- [x] æŒ‡ä»¤æ”¯æŒ
- [x] è®¾ç½®ç®¡ç†å‘˜
- [x] ç¾¤ç»„é»‘ç™½åå•æ§åˆ¶
- [x] ä¸‹è½½å‰è¯¢é—®ç”¨æˆ·

--------------------------------------------------

### ğŸ”‘æŒ‡ä»¤
- /bilivideoparser
- /bvp
- ç”¨æ³•: /bvp [option] [value]

```
å¯ç”¨é€‰é¡¹:
enable # å¼€å…³æ’ä»¶
shortlink # å¼€å…³çŸ­é“¾æ¥
info # å¼€å…³è¯¦ç»†ä¿¡æ¯
download # å¼€å…³ä¸‹è½½è§†é¢‘
sendlink # æ˜¯å¦å‘é€è§£æåçš„è§†é¢‘é“¾æ¥
askdownload # æ˜¯å¦å¼€å¯è¯¢é—®
addadmin # æ·»åŠ ç®¡ç†å‘˜
removeadmin # ç§»é™¤ç®¡ç†å‘˜
listadmins # ç®¡ç†å‘˜åˆ—è¡¨
addwhite # æ·»åŠ ç¾¤ç™½åå•
addblack # æ·»åŠ ç¾¤é»‘åå•
removewhite # ç§»é™¤ç™½åå•
removeblack # ç§»é™¤é»‘åå•
listgroups # æŸ¥çœ‹ç¾¤ç»„åˆ—è¡¨
```

-----------------------------------------
### ğŸ“·æ’ä»¶æˆªå›¾
<details>

<summary>ç›¸å…³æˆªå›¾</summary>

![e1ffac4d-3043-4d6b-a814-d6be1497e997.png](https://mirai.mamoe.net/assets/uploads/files/1742203041642-356a4b0d-57b0-4a12-acac-8435e5e4aafa.png)
![QQ_1742202849146.png](https://mirai.mamoe.net/assets/uploads/files/1742203056542-e1ffac4d-3043-4d6b-a814-d6be1497e997.png)
![QQ_1742202875264.png](https://mirai.mamoe.net/assets/uploads/files/1742203072380-qq_1742202849146.png)
![356a4b0d-57b0-4a12-acac-8435e5e4aafa.png](https://mirai.mamoe.net/assets/uploads/files/1742203161015-qq_1742202875264.png)

</details>

-------------------------------------

#### ğŸ’¡ Configå·²å®ç°è‡ªåŠ¨æ›´æ–°ï¼Œæ—§ç‰ˆConfig.ymlå·²å¤±æ•ˆï¼Œæ–°ç‰ˆBiliVideoParserConfig.ymlä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨åŒä¸€æ–‡ä»¶å¤¹
| Config             | ä»‹ç»                                            | Default                 | å¯æ”¹å‚æ•°         |
|--------------------|-----------------------------------------------|-------------------------|--------------|
| configVersion      | é…ç½®ç‰ˆæœ¬å·ï¼Œç”¨äºè‡ªåŠ¨æ£€æµ‹å’Œæ›´æ–°æ—§ç‰ˆé…ç½®ï¼Œè¯·å‹¿è‡ªè¡Œä¿®æ”¹                    | **IGNORE**              |  
| enableParsing      | æ˜¯å¦å¯ç”¨è§£æåŠŸèƒ½                                      | true                    | false        |         
| useShortLink       | æ˜¯å¦ä½¿ç”¨çŸ­é“¾æ¥ï¼ˆb23.tvï¼‰ï¼›è‹¥ä¸º false åˆ™ä½¿ç”¨é•¿é“¾æ¥ï¼ˆbilibili.comï¼‰ | true                    | false        |
| enableDetailedInfo | æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†è§†é¢‘ä¿¡æ¯ï¼ˆåŒ…æ‹¬upä¸»ã€æ’­æ”¾é‡ã€è¯„è®ºæ•°ã€ç®€ä»‹ã€ç‚¹èµã€æ”¶è—ã€æŠ•å¸ã€è½¬å‘ï¼‰      | true                    | false        |
| enableDownload     | æ˜¯å¦å¯ç”¨è§†é¢‘ä¸‹è½½åŠŸèƒ½                                    | true                    | false        |
| adminQQs           | ç®¡ç†å‘˜QQ                                         | 123456789               | %QQå·%        |
| groupWhiteList     | ç™½åå•ç¾¤å·åˆ—è¡¨ï¼ˆä¼˜å…ˆç”Ÿæ•ˆï¼‰                                 | []                      | %ç¾¤å·%         |
| groupBlackList     | é»‘åå•ç¾¤å·åˆ—è¡¨                                       | []                      | %ç¾¤å·%         |
| sendlink           | æ˜¯å¦å‘é€è§£æåçš„è§†é¢‘é“¾æ¥                                  | true                    | false        |
| askBeforeDownload  | æ˜¯å¦åœ¨ä¸‹è½½å‰è¯¢é—®ç”¨æˆ·                                    | false                   | true         |

-------------------------------------------
### ç¼–è¯‘  - éå¼€å‘è€…è¯·æ— è§†
- å¦‚æœéœ€è¦ä½¿ç”¨pluginbuild ç¼–è¯‘è¯·ä½¿ç”¨
```
./gradlew clean buildPlugin -x miraiPrepareMetadata
  ```
- æ¥é˜²æ­¢miraiPrepareMetadataé€ æˆçš„æŠ¥é”™(ç†è®ºä¸Šæ™®é€šbuildä¹Ÿå¯è¡Œ)
